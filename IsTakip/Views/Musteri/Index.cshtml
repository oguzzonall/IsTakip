
@{
    ViewBag.Title = "Index";
}

@using IsTakip.Models;
@model IEnumerable<MusteriIstekler>

<div class="col-lg-12">
    <div class="panel">
        <div class="panel-body" style="overflow-x:auto">
            <div class="btn-group pull-right open">
                <a class="nav-link btn btn-success" data-toggle="modal" data-target="#YeniIstekModal">
                    Yeni İstek
                </a>
            </div>
            <div id="unseen">
                <table width="100%" class="table table-bordered table-striped table-condensed">
                    <thead>
                        <tr>
                            <th class="numeric">İstek No</th>
                            <th class="numeric">İstek Tarihi</th>
                            <th>İstek Tipi</th>
                            <th>İstek</th>
                            <th class="numeric">Görüldü</th>
                            <th class="numeric">Detayı Gör</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (MusteriIstekler MI in Model)
                        {
                            <tr>
                                <td class="numeric">@MI.id</td>
                                <td class="numeric">@MI.IstekTarihi</td>
                                <td>@MI.IsTakipIstekTipi.TipAdi</td>
                                <td>@MI.Istek</td>
                                <td class="numeric"> <a style="margin-left:20px;">@Html.DisplayFor(modelItem => MI.Goruldu)</a></td>
                                <td class="numeric"><a href="/Musteri/IstekDetay/@MI.id" class="btn btn-success" style="margin-top:5px;">Detay</a></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="YeniIstekModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">İstek Ekle</h4>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/Musteri/IstekEkle" method="post">
                    <div class="form-group">
                        <label>İstek Tipi</label>
                        <select class="form-control error" name="IstekTipId" required="">
                            @foreach (IsTakipIstekTipi Tip in ViewBag.IstekTipleri)
                            {
                                <option value="@Tip.id">@Tip.TipAdi</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label>İçerik:</label>
                        <textarea name="Istek" class="form-control" rows="6" required="" maxlength="1000"></textarea>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-success" type="submit">İstek Ekle</button>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">İptal</button>
            </div>
        </div>
    </div>
</div>